<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Setting Up Apache Spark on NixOS: Installation and Configuration Guide</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
            color: #333;
        }
        header {
            background-color: #2C3E50;
            color: white;
            padding: 20px;
            text-align: center;
        }
        header h1 {
            margin: 0;
        }
        main {
            padding: 20px;
            max-width: 1000px;
            margin: 0 auto;
        }
        .content-section {
            margin-bottom: 30px;
        }
        .content-section h2 {
            color: #2980B9;
            border-bottom: 2px solid #2980B9;
            padding-bottom: 10px;
        }
        .content-section p {
            line-height: 1.6;
        }
        pre {
            background-color: #2C3E50;
            color: white;
            padding: 15px;
            border-radius: 5px;
            font-size: 14px;
            overflow-x: auto;
        }
        .image-container {
            text-align: center;
            margin: 20px 0;
        }
        .image-container img {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
        }
        .command-box {
            background-color: #BDC3C7;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', Courier, monospace;
            margin: 15px 0;
        }
        footer {
            background-color: #2C3E50;
            color: white;
            text-align: center;
            padding: 10px 0;
            position: fixed;
            bottom: 0;
            width: 100%;
        }
    </style>
</head>
<body>
    <header>
        <h1>Setting Up Apache Spark on NixOS: Installation and Configuration Guide</h1>
    </header>

    <main>
        <section class="content-section">
            <h2>Introduction</h2>
            <p>In this guide, I will walk you through the process of setting up Apache Spark on NixOS. From searching for the package to running Spark and monitoring jobs, this tutorial covers all the necessary steps to get you up and running with Spark on NixOS.</p>
        </section>

        <section class="content-section">
            <h2>Finding Spark in NixOS Packages</h2>
            <p>I wanted to use Apache Spark on NixOS, so I started by searching for it in the NixOS packages. I visited the NixOS package search page and looked up "Spark" to find the relevant package.</p>
            <p>The search results can be found <a href="https://search.nixos.org/packages?channel=24.11&from=0&size=50&sort=relevance&type=packages&query=spark" target="_blank">here</a>, which provided me with an overview of the available packages related to Spark.</p>
        </section>

        <section class="content-section">
            <h2>Temporary Installation of Apache Spark</h2>
            <p>After reviewing the description, I learned that to temporarily install Apache Spark on my NixOS system, I needed to run the following command in the terminal:</p>
            <div class="command-box">
                <code>nix-shell -p spark</code>
            </div>
            <div class="image-container">
                <img src="https://raw.githubusercontent.com/nbahador/nbahador.github.io/main/assets/img/spark1_enhanced.png" alt="Spark Installation Process">
            </div>
        </section>

        <section class="content-section">
            <h2>Installation Output</h2>
            <p>Once I ran the command, the following output showed the required packages being downloaded and unpacked:</p>
            <pre>
[nix-shell:~]$ nix-shell -p spark
these 75 paths will be fetched (2045.57 MiB download, 3429.77 MiB unpacked):
 /nix/store/2iid46m056qragavy6gmnns8l05dzvqp-R-4.4.1
 /nix/store/6dnnrky4niwkrdzd1l7dy3m8slgwg8hn-R-4.4.1-tex
 /nix/store/93b3kqnclbp3vzjkji81b2m409q8riq4-abseil-cpp-20240722.0
...
            </pre>
            <div class="image-container">
                <img src="https://raw.githubusercontent.com/nbahador/nbahador.github.io/main/assets/img/spark2_enhanced.png" alt="Installation Output">
            </div>
        </section>

        <section class="content-section">
            <h2>Running Spark</h2>
            <p>After the installation process was complete, I ran Spark by typing the following command in the terminal:</p>
            <div class="command-box">
                <code>spark-shell</code>
            </div>
            <p>Once it started, the Spark shell application UI became available at <a href="http://142.1.33.126:4040" target="_blank">http://142.1.33.126:4040</a>, where I could monitor and interact with my Spark instance.</p>
            <div class="image-container">
                <img src="https://raw.githubusercontent.com/nbahador/nbahador.github.io/main/assets/img/spark3_enhanced.png" alt="Spark Shell">
            </div>
        </section>

        <section class="content-section">
            <h2>Monitoring Spark Jobs</h2>
            <p>Below are different windows of the Web UI that I accessed to monitor and interact with Apache Spark. These windows provided various insights into the job statuses, active applications, and performance metrics:</p>
            <div class="image-container">
                <img src="https://raw.githubusercontent.com/nbahador/nbahador.github.io/main/assets/img/spark4_enhanced.png" alt="Spark Web UI Job Status">
            </div>
            <div class="image-container">
                <img src="https://raw.githubusercontent.com/nbahador/nbahador.github.io/main/assets/img/spark5_enhanced.png" alt="Spark Web UI Active Applications">
            </div>
            <div class="image-container">
                <img src="https://raw.githubusercontent.com/nbahador/nbahador.github.io/main/assets/img/spark6_enhanced.png" alt="Spark Web UI Performance Metrics">
            </div>
            <div class="image-container">
                <img src="https://raw.githubusercontent.com/nbahador/nbahador.github.io/main/assets/img/spark7_enhanced.png" alt="Spark Web UI Task Details">
            </div>
            <div class="image-container">
                <img src="https://raw.githubusercontent.com/nbahador/nbahador.github.io/main/assets/img/spark8_enhanced.png" alt="Spark Web UI Executor Information">
            </div>
        </section>

        <section class="content-section">
            <h2>Initializing Spark Session</h2>
            <p>I started by initializing the Spark session. This allowed me to begin working with Spark's features, such as running jobs, processing data, and interacting with the Spark environment.</p>
            <pre>
// Import necessary Spark libraries
import org.apache.spark.sql.SparkSession

// Initialize the Spark session
val spark = SparkSession.builder
  .appName("Spark Scala Example")
  .config("spark.master", "local[*]")
  .getOrCreate()
            </pre>
            <p>After hitting Enter, I saw the Spark session initialize in the output. This confirmed that Spark was successfully set up and ready for use, allowing me to start running Spark commands and jobs.</p>
            <div class="image-container">
                <img src="https://raw.githubusercontent.com/nbahador/nbahador.github.io/main/assets/img/spark10_enhanced.png" alt="Spark Session Initialized">
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 Spark on NixOS Tutorial</p>
    </footer>
</body>
</html>
